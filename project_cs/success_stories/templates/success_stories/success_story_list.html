{% extends "base.html" %}
{% comment %} {% extends "base.html" %}

{% block content %}
    <div class="container mx-auto my-8 p-6">
        <h1 class="text-3xl font-bold text-blue-600 mb-8 text-center">Success Stories</h1>
        
        <!-- Stories List -->
        <div class="space-y-6">
            {% for story in stories %}
                <div class="bg-white p-6 shadow-lg rounded-lg text-center hover:shadow-2xl transition duration-300 ease-in-out">
                    <!-- Story Title -->
                    <a href="/home/success_stories/{{ story.story_id }}/" class="text-xl font-semibold text-blue-500 hover:text-blue-700 mb-4">
                        {{ story.story_title }}
                    </a>

                    <!-- Story Updated Date -->
                    <p class="text-gray-600 mb-3">
                        <span class="font-medium">Updated:</span> {{ story.updated_at }}
                    </p>

                    <!-- Posted by information -->
                    <p class="text-gray-600 mb-4">
                        <span class="font-medium">Posted by:</span> {{ story.username }} ({{ story.user_role }})
                    </p>

                    <!-- Read More Button -->
                    <a href="/home/success_stories/{{ story.story_id }}/" class="text-sm text-white bg-blue-500 hover:bg-blue-600 font-semibold px-4 py-2 rounded-md transition duration-300">
                        Read More
                    </a>
                </div>
            {% endfor %}
        </div>

        <!-- Add New Story Button -->
        {% if not is_first_year %}
            <div class="mt-10 text-center">
                <a href="add/" class="inline-block px-6 py-3 bg-primary text-white font-semibold rounded-md shadow-lg hover:bg-primary-dark transition duration-300 ease-in-out">
                    Add New Story
                </a>
            </div>
        {% endif %}
    </div>
{% endblock %} {% endcomment %}


{% block content %}
    <div class="container mx-auto my-8 p-6">
        <h1 class="text-3xl font-bold text-blue-600 mb-8 text-center">Success Stories</h1>
        
        <!-- Search Form -->
        <form method="GET" action="" class="mb-8 text-center">
            <input type="text" name="q" placeholder="Search stories..." 
                   class="border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" 
                   value="{{ search_query }}">  <!-- Use 'search_query' here -->
            <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-300">
                Search
            </button>
        </form>

        <!-- Stories List -->
        <div class="space-y-6">
            {% for story in stories %}
                <div class="bg-white p-6 shadow-lg rounded-lg text-center hover:shadow-2xl transition duration-300 ease-in-out">
                    <!-- Story Title -->
                    <a href="/home/success_stories/{{ story.story_id }}/" class="text-xl font-semibold text-blue-500 hover:text-blue-700 mb-4">
                        {{ story.story_title }}
                    </a>

                    <!-- Story Updated Date -->
                    <p class="text-gray-600 mb-3">
                        <span class="font-medium">Updated:</span> {{ story.updated_at }}
                    </p>

                    <!-- Posted by information -->
                    <p class="text-gray-600 mb-4">
                        <span class="font-medium">Posted by:</span> {{ story.username }} ({{ story.user_role }})
                    </p>

                    <!-- Read More Button -->
                    <a href="/home/success_stories/{{ story.story_id }}/" class="text-sm text-white bg-blue-500 hover:bg-blue-600 font-semibold px-4 py-2 rounded-md transition duration-300">
                        Read More
                    </a>
                </div>
            {% empty %}
                <p class="text-center text-gray-500">No stories found.</p>
            {% endfor %}
        </div>

        <!-- Add New Story Button -->
        {% if not is_first_year %}
            <div class="mt-10 text-center">
                <a href="add/" class="inline-block px-6 py-3 bg-primary text-white font-semibold rounded-md shadow-lg hover:bg-primary-dark transition duration-300 ease-in-out">
                    Add New Story
                </a>
            </div>
        {% endif %}
    </div>
{% endblock %}
